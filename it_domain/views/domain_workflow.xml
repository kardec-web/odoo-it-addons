<?xml version="1.0" encoding="UTF-8"?>
<openerp>
  <data>
    <record model="workflow" id="it_domain_automatic_workflow">
      <field name="name">it.domain.automatic.workflow</field>
      <field name="osv">it.domain</field>
      <field name="on_create">True</field>
    </record>

  <record model="workflow.activity" id="active">
      <field name="name">Active</field>
      <field name="wkf_id" ref="it_domain_automatic_workflow"/>
      <field name="kind">function</field>
      <field name="action">action_active()</field>
    </record>
    <record model="workflow.activity" id="expired">
      <field name="name">Expired</field>
      <field name="wkf_id" ref="it_domain_automatic_workflow"/>
      <field name="kind">function</field>
      <field name="action">action_expired()</field>
    </record>

    <record model="workflow.transition" id="it_domain_expired_to_active">
      <field name="act_from" ref="expired"/>
      <field name="act_to" ref="active"/>
      <field name="signal">active</field>
    </record>
    
    <record model="workflow.transition" id="it_domain_active_to_expired">
      <field name="act_from" ref="active"/>
      <field name="act_to" ref="expired"/>
      <field name="signal">expired</field>
    </record>

    <!-- Automatic transition -->
    <record model="workflow.transition" id="it_domain_automatic_active">
      <field name="act_from" ref="expired"/>
      <field name="act_to" ref="active"/>
      <field name="condition">not is_expired</field>
    </record>

    <record model="workflow.transition" id="it_domain_automatic_expired">
      <field name="act_from" ref="active"/>
      <field name="act_to" ref="expired"/>
      <field name="condition">is_expired</field>
    </record>

  </data>
</openerp>
